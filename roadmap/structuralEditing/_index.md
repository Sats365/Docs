---
title: Структурное редактирование
---

**Цель**: взять все лучшее из тулов типа [Dynalist](https://dynalist.io) и [WorkFlowy](https://workflowy.com) при этом не нарушая привычного UX текстовых редакторов.

## Проблема

Во всех (или почти во всех) редакторах к статьям подходят как к набору строк и абзацев. Например, если перемещаешь заголовок наверх -- то он перемещается как обычная строка, т.е. текст не воспринимается как часть четкой структуры уровне документа, а заголовки -- узлы этой структуры. Таким образом поддержание правильной структуры и ее формирование является весьма затруднительным делом. В то же время правильная структура для текстов очень важна как для читателя, также и для внесения в этот документ последующих изменений. В особенной степени это касается технической документации. 

Скорее всего текущий UX текстовых редакторов вызван плохими привычками, сформированными такими редакторами как Word. Где начинающие центруют пробелами или для разрыва страницы вставляют необходимо кол-во пустых строк. А также управляют видом текста на уровне конкретных слов или абзацев: задают нужную гарнитуру или размер шрифта, задают жирность.

В текстовых редакторах стили в полной мере используются крайне редко. И это даже в редакторах, которые это позволяют -- например, в Word. Хотя стиль -- это не что иное, как типизация блоков текста -- т.е. текст размечается как "вот это код, а это примечание". К примеру, в Google Docs есть крайне ограниченное количество стилей и, скажем, чтобы там добавить кодовый блок, нужно ставить отдельное расширение и это даже бесплатно, но целостной интеграции это не дает. Кроме того, такие плагины требуют разрешения, что даже приходят оповещение системы безопасности на телефон, что теперь у сторонего расширения есть доступ к вашему эккаунту, что не может являться приятным. 

Вот например в Paper можно под элементом первого уровня добавить элемент списка 10-го уровня, а потом его переместить и сделать первой строкой списка. Это дает простоту и свободу при редактировании. Но если структуризацию сделать правильно, то она не должна ни усложнить ни лишить свободы.

Даже непонятно в каких случаях может потребоваться двигать заголовок на один параграф вверх или вниз? Где это вообще применимо?

Тулы типа WorkFlowy и Dynalist так и не набрали популярности, за счет своей жесткой специфики и непохожести на обычные инструменты по работе с текстом. Также в них отсутствуют привычные вещи, такие, например, как комментарии. При этом интерес к таким редакторам сохраняется долгое время, например есть активный [топик на reddit](https://www.reddit.com/r/Workflowy/). 

## Решение

Любой текст -- жесткая типизированная организованная структура. При этом визуально все будет выглядеть и редактироваться как обычный текст. При этом режим работы со структурой будет внедрен в редактор, в частности будут поддерживаться перемещение и схлопывание блоков по всем уровням.

### Как организовать структуру

Ниже даны примеры текстов и уровней по структурам:

- **Общий вид**: `Заголовок 1` / `Заголовок 2` / `Cписок` / `Элемент уровня 1` / Абзац / `Жирный` / `Жирный курсив`. Перед уровнем абзаца -- блоковые элементы, а дальше -- инлайновые.
- **Список** -- иерархия, работа с уровнями аналогична заголовкам и главам. Структура: `Элемент уровня 1` / `Элемент уровня 2` -> Абзац
- **Таблица** -- это двумерная иерархия: `Таблица` / `Строка` / `Ячейка` / Абзац, альтернативное измерение: `Таблица` / `Столбец` / `Ячейка` / Абзац.
- **Инлайновые блоки** -- то, что внутри уровня абзаца. Текст, который идет в потоке остального текста, внутри блока: Абзац / `Жирный` / `Жирный курсив` или Абзац / `Кнопка` / `Текст` (расширенные свойства -- Иконка).

### Примеры действий и их механика

#### Перемещения

- **Перемещение заголовка**. Является перемещением главы, т.к. также перемещается весь текст внутри этого заголовка, включая заголовки уровнями ниже и их содержимое.
- **Перемещении элемента списка**. Перемещается вместе с подэлементами. Список -- двумерная структура, также имеет уровни. При изменении уровня элемента - все дочерние элементы списка также меняют уровень. Разрывы уровней списка не допускается, т.к. под 1-ым уровнем не может быть 3-ий, а сам список не может начинаться с уровня отличного от 1. 
- **Перемещение строк таблицы**. Если сделаем группировку ячеек и строк - будут перемещаться группы. Таблицы -- двумерная структура, перемещение столбцов тоже допускается.

  Кстати, на удивление, в текстовых редакторах не допускается перемещение ячеек за границу таблицы, что является чистым структурным ограничением.

#### Навигация и выделение

Возьмем из популярных и привычных разработчикам IDE:

- **Выделение родительского блока**. Выделение всего родительского блока, при повторном нажатии -- поднятие по иерархии на один уровень выше. В редакторах кода это называется [Expand selection](https://www.jetbrains.com/help/resharper/Coding_Assistance__Extend_Shrink_Selection.html)
- **Структура заголовков**. Возможность схлопнуть содержимое до определенного уровня заголовков схоже режиму [search: Outline view in MS Word](https://www.howtogeek.com/726748/how-to-use-outline-view-in-microsoft-word/). Чтобы можно было работать фокусированно со структурой не отвлекаясь на содержимое, в т.ч. менять расположение заголовков и их подчиненность. 
- **Схлопывание блока**. Уметь схлопнуть блок, чтобы детали блока не были видны, например схлопнуть конкретную главу или список уровней. Аналогично [wiki: Code folding](https://en.wikipedia.org/wiki/Code_folding).
